<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Constructor for Risk Profiles</title>
    <!--
    PURPOSE: Build diversified portfolios for three investor profiles with metrics analysis
    USE: Activity 3 - Portfolio Construction for Different Risk Profiles (10 minutes)
    -->
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text: #1f2937;
            --surface: #f9fafb;
        }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text);
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
        }
        .investor-tabs {
            display: flex;
            gap: 5px;
            margin: 20px 0;
        }
        .tab-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            background: var(--surface);
            cursor: pointer;
            font-weight: 600;
            text-align: center;
        }
        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .investor-panel {
            display: none;
            border: 2px solid var(--primary);
            border-radius: 0 8px 8px 8px;
            padding: 20px;
        }
        .investor-panel.active {
            display: block;
        }
        .profile-box {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .profile-box h3 {
            margin-top: 0;
            color: var(--primary);
        }
        .allocation-builder {
            display: grid;
            gap: 10px;
            margin: 15px 0;
        }
        .alloc-row {
            display: grid;
            grid-template-columns: 150px 1fr 70px;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: var(--surface);
            border-radius: 6px;
        }
        .alloc-row label {
            font-weight: 600;
        }
        .alloc-row input[type="range"] {
            width: 100%;
        }
        .alloc-row .pct {
            text-align: right;
            font-weight: bold;
            color: var(--primary);
        }
        .total-row {
            background: var(--primary);
            color: white;
        }
        .total-row .pct {
            color: white;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        .metric-box {
            background: white;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }
        .metric-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
        }
        .metric-label {
            font-size: 0.75rem;
            color: #6b7280;
        }
        .justification-box {
            margin: 15px 0;
        }
        .justification-box label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .justification-box textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            min-height: 60px;
            font-family: inherit;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: var(--primary);
            color: white;
            margin: 5px;
        }
        .btn:hover {
            background: #4f46e5;
        }
        @media print {
            .investor-tabs { display: none; }
            .investor-panel { display: block !important; border: 1px solid #ddd; margin: 20px 0; }
        }
    </style>
</head>
<body>
    <h1>ðŸ‘¤ Portfolio Constructor for Risk Profiles</h1>

    <p>Build appropriate portfolios for three different investors. Adjust allocations using the sliders and justify your choices based on each investor's profile.</p>

    <div class="investor-tabs">
        <button class="tab-btn active" onclick="showInvestor(0)">Maria, 25</button>
        <button class="tab-btn" onclick="showInvestor(1)">David, 45</button>
        <button class="tab-btn" onclick="showInvestor(2)">Sharon, 63</button>
    </div>

    <!-- Maria, 25 -->
    <div class="investor-panel active" id="investor-0">
        <div class="profile-box">
            <h3>Maria, Age 25</h3>
            <p><strong>Situation:</strong> Software developer earning $85,000/year. Just started her first job. Has $15,000 to invest, no debt. Plans to retire around age 65.</p>
            <p><strong>Risk Profile:</strong> High tolerance, very long time horizon (40 years), stable income, no dependents.</p>
        </div>

        <h4>Build Maria's Portfolio</h4>
        <div class="allocation-builder" id="builder-0">
            <div class="alloc-row">
                <label>US Stocks</label>
                <input type="range" min="0" max="100" value="60" oninput="updatePortfolio(0)">
                <span class="pct">60%</span>
            </div>
            <div class="alloc-row">
                <label>Int'l Stocks</label>
                <input type="range" min="0" max="100" value="20" oninput="updatePortfolio(0)">
                <span class="pct">20%</span>
            </div>
            <div class="alloc-row">
                <label>Bonds</label>
                <input type="range" min="0" max="100" value="10" oninput="updatePortfolio(0)">
                <span class="pct">10%</span>
            </div>
            <div class="alloc-row">
                <label>REITs</label>
                <input type="range" min="0" max="100" value="5" oninput="updatePortfolio(0)">
                <span class="pct">5%</span>
            </div>
            <div class="alloc-row">
                <label>Cash</label>
                <input type="range" min="0" max="100" value="5" oninput="updatePortfolio(0)">
                <span class="pct">5%</span>
            </div>
            <div class="alloc-row total-row">
                <label>Total</label>
                <span></span>
                <span class="pct" id="total-0">100%</span>
            </div>
        </div>

        <button class="btn" onclick="calculateMetrics(0)">Calculate Portfolio Metrics</button>

        <div class="metrics-grid" id="metrics-0">
            <div class="metric-box">
                <div class="metric-value" id="return-0">9.2%</div>
                <div class="metric-label">Expected Return</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="risk-0">14.5%</div>
                <div class="metric-label">Std Deviation</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="sharpe-0">0.43</div>
                <div class="metric-label">Sharpe Ratio</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="growth-0">$480K</div>
                <div class="metric-label">40-Yr Growth</div>
            </div>
        </div>

        <div class="justification-box">
            <label>Justify your allocation for Maria:</label>
            <textarea placeholder="Explain why this allocation is appropriate given Maria's age, income, goals, and risk tolerance..."></textarea>
        </div>
    </div>

    <!-- David, 45 -->
    <div class="investor-panel" id="investor-1">
        <div class="profile-box">
            <h3>David, Age 45</h3>
            <p><strong>Situation:</strong> Marketing director earning $130,000/year. Has $350,000 in retirement accounts. Two kids (ages 12 and 15) heading to college soon. Moderate debt (mortgage).</p>
            <p><strong>Risk Profile:</strong> Moderate tolerance, medium time horizon (20 years), competing financial priorities.</p>
        </div>

        <h4>Build David's Portfolio</h4>
        <div class="allocation-builder" id="builder-1">
            <div class="alloc-row">
                <label>US Stocks</label>
                <input type="range" min="0" max="100" value="45" oninput="updatePortfolio(1)">
                <span class="pct">45%</span>
            </div>
            <div class="alloc-row">
                <label>Int'l Stocks</label>
                <input type="range" min="0" max="100" value="15" oninput="updatePortfolio(1)">
                <span class="pct">15%</span>
            </div>
            <div class="alloc-row">
                <label>Bonds</label>
                <input type="range" min="0" max="100" value="30" oninput="updatePortfolio(1)">
                <span class="pct">30%</span>
            </div>
            <div class="alloc-row">
                <label>REITs</label>
                <input type="range" min="0" max="100" value="5" oninput="updatePortfolio(1)">
                <span class="pct">5%</span>
            </div>
            <div class="alloc-row">
                <label>Cash</label>
                <input type="range" min="0" max="100" value="5" oninput="updatePortfolio(1)">
                <span class="pct">5%</span>
            </div>
            <div class="alloc-row total-row">
                <label>Total</label>
                <span></span>
                <span class="pct" id="total-1">100%</span>
            </div>
        </div>

        <button class="btn" onclick="calculateMetrics(1)">Calculate Portfolio Metrics</button>

        <div class="metrics-grid" id="metrics-1">
            <div class="metric-box">
                <div class="metric-value" id="return-1">7.5%</div>
                <div class="metric-label">Expected Return</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="risk-1">11.2%</div>
                <div class="metric-label">Std Deviation</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="sharpe-1">0.40</div>
                <div class="metric-label">Sharpe Ratio</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="growth-1">$1.5M</div>
                <div class="metric-label">20-Yr Growth</div>
            </div>
        </div>

        <div class="justification-box">
            <label>Justify your allocation for David:</label>
            <textarea placeholder="Explain why this allocation is appropriate given David's age, family situation, and competing priorities..."></textarea>
        </div>
    </div>

    <!-- Sharon, 63 -->
    <div class="investor-panel" id="investor-2">
        <div class="profile-box">
            <h3>Sharon, Age 63</h3>
            <p><strong>Situation:</strong> Teacher earning $70,000/year. Plans to retire in 2 years. Has $600,000 in retirement accounts. Home paid off. Will receive pension and Social Security.</p>
            <p><strong>Risk Profile:</strong> Low tolerance, short time horizon (2 years to retirement), needs income, concerned about sequence of returns risk.</p>
        </div>

        <h4>Build Sharon's Portfolio</h4>
        <div class="allocation-builder" id="builder-2">
            <div class="alloc-row">
                <label>US Stocks</label>
                <input type="range" min="0" max="100" value="30" oninput="updatePortfolio(2)">
                <span class="pct">30%</span>
            </div>
            <div class="alloc-row">
                <label>Int'l Stocks</label>
                <input type="range" min="0" max="100" value="10" oninput="updatePortfolio(2)">
                <span class="pct">10%</span>
            </div>
            <div class="alloc-row">
                <label>Bonds</label>
                <input type="range" min="0" max="100" value="45" oninput="updatePortfolio(2)">
                <span class="pct">45%</span>
            </div>
            <div class="alloc-row">
                <label>REITs</label>
                <input type="range" min="0" max="100" value="5" oninput="updatePortfolio(2)">
                <span class="pct">5%</span>
            </div>
            <div class="alloc-row">
                <label>Cash</label>
                <input type="range" min="0" max="100" value="10" oninput="updatePortfolio(2)">
                <span class="pct">10%</span>
            </div>
            <div class="alloc-row total-row">
                <label>Total</label>
                <span></span>
                <span class="pct" id="total-2">100%</span>
            </div>
        </div>

        <button class="btn" onclick="calculateMetrics(2)">Calculate Portfolio Metrics</button>

        <div class="metrics-grid" id="metrics-2">
            <div class="metric-box">
                <div class="metric-value" id="return-2">5.8%</div>
                <div class="metric-label">Expected Return</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="risk-2">8.5%</div>
                <div class="metric-label">Std Deviation</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="sharpe-2">0.33</div>
                <div class="metric-label">Sharpe Ratio</div>
            </div>
            <div class="metric-box">
                <div class="metric-value" id="growth-2">$672K</div>
                <div class="metric-label">2-Yr Value</div>
            </div>
        </div>

        <div class="justification-box">
            <label>Justify your allocation for Sharon:</label>
            <textarea placeholder="Explain why this allocation is appropriate given Sharon's proximity to retirement and income needs..."></textarea>
        </div>
    </div>

    <script>
        const investorYears = [40, 20, 2];
        const investorStart = [15000, 350000, 600000];

        function showInvestor(index) {
            document.querySelectorAll('.tab-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });
            document.querySelectorAll('.investor-panel').forEach((panel, i) => {
                panel.classList.toggle('active', i === index);
            });
        }

        function updatePortfolio(investorIndex) {
            const builder = document.getElementById(`builder-${investorIndex}`);
            const inputs = builder.querySelectorAll('input[type="range"]');
            const pcts = builder.querySelectorAll('.pct');

            let total = 0;
            inputs.forEach((input, i) => {
                const val = parseInt(input.value);
                pcts[i].textContent = val + '%';
                total += val;
            });

            const totalEl = document.getElementById(`total-${investorIndex}`);
            totalEl.textContent = total + '%';
            totalEl.style.color = total === 100 ? 'white' : '#ef4444';
        }

        function calculateMetrics(investorIndex) {
            const builder = document.getElementById(`builder-${investorIndex}`);
            const inputs = builder.querySelectorAll('input[type="range"]');
            const values = Array.from(inputs).map(input => parseInt(input.value) / 100);

            // Expected returns and volatility
            const returns = [0.10, 0.08, 0.035, 0.08, 0.01];
            const vols = [0.15, 0.18, 0.05, 0.17, 0.01];

            let expReturn = 0;
            let variance = 0;
            values.forEach((weight, i) => {
                expReturn += weight * returns[i];
                variance += Math.pow(weight * vols[i], 2);
            });

            const stdDev = Math.sqrt(variance);
            const sharpe = (expReturn - 0.03) / stdDev;

            const years = investorYears[investorIndex];
            const startVal = investorStart[investorIndex];
            const futureVal = startVal * Math.pow(1 + expReturn, years);

            document.getElementById(`return-${investorIndex}`).textContent = (expReturn * 100).toFixed(1) + '%';
            document.getElementById(`risk-${investorIndex}`).textContent = (stdDev * 100).toFixed(1) + '%';
            document.getElementById(`sharpe-${investorIndex}`).textContent = sharpe.toFixed(2);

            let growthText;
            if (futureVal >= 1000000) {
                growthText = '$' + (futureVal / 1000000).toFixed(1) + 'M';
            } else {
                growthText = '$' + (futureVal / 1000).toFixed(0) + 'K';
            }
            document.getElementById(`growth-${investorIndex}`).textContent = growthText;
        }
    </script>
</body>
</html>
