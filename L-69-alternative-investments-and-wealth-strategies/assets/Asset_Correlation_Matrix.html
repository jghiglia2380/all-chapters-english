<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Correlation Matrix Tool</title>
    <style>
        :root { --primary: #6366f1; --secondary: #8b5cf6; --success: #10b981; --warning: #f59e0b; --danger: #ef4444; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; font-size: 14px; line-height: 1.5; color: #1f2937; max-width: 900px; margin: 0 auto; padding: 15px; }
        h1 { color: var(--primary); font-size: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px; }
        h2 { color: var(--secondary); font-size: 18px; margin-top: 20px; }
        .matrix-container { overflow-x: auto; margin: 15px 0; }
        .correlation-matrix { border-collapse: collapse; font-size: 12px; }
        .correlation-matrix th, .correlation-matrix td { border: 1px solid #d1d5db; padding: 8px; text-align: center; min-width: 60px; }
        .correlation-matrix th { background: var(--primary); color: white; font-size: 11px; }
        .correlation-matrix td { cursor: pointer; }
        .correlation-matrix td:hover { outline: 2px solid var(--primary); }
        .high-positive { background: #dc2626; color: white; }
        .medium-positive { background: #f97316; color: white; }
        .low-positive { background: #fbbf24; }
        .no-correlation { background: #f3f4f6; }
        .low-negative { background: #86efac; }
        .medium-negative { background: #22c55e; color: white; }
        .high-negative { background: #16a34a; color: white; }
        .legend { display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0; font-size: 11px; }
        .legend-item { display: flex; align-items: center; gap: 5px; }
        .legend-color { width: 20px; height: 20px; border-radius: 3px; }
        .detail-panel { background: #f9fafb; padding: 15px; border-radius: 5px; margin: 15px 0; display: none; }
        .pair-info { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .pair-box { background: white; padding: 10px; border-radius: 4px; }
        .correlation-value { font-size: 32px; font-weight: bold; text-align: center; padding: 10px; }
        .interpretation { background: #fef3c7; padding: 10px; border-radius: 4px; margin-top: 10px; font-size: 12px; }
        button { background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: var(--secondary); }
        @media print { body { font-size: 10pt; } .correlation-matrix { font-size: 9pt; } }
    </style>
</head>
<body>
    <h1>Asset Correlation Matrix Tool</h1>
    <p>Explore how different asset classes move together (2010-2023 data)</p>

    <div class="legend">
        <div class="legend-item"><div class="legend-color high-positive"></div>0.7 to 1.0 (Strong +)</div>
        <div class="legend-item"><div class="legend-color medium-positive"></div>0.3 to 0.7 (Moderate +)</div>
        <div class="legend-item"><div class="legend-color low-positive"></div>0 to 0.3 (Weak +)</div>
        <div class="legend-item"><div class="legend-color low-negative"></div>-0.3 to 0 (Weak -)</div>
        <div class="legend-item"><div class="legend-color medium-negative"></div>-0.7 to -0.3 (Moderate -)</div>
        <div class="legend-item"><div class="legend-color high-negative"></div>-1.0 to -0.7 (Strong -)</div>
    </div>

    <div class="matrix-container">
        <table class="correlation-matrix" id="matrix">
            <!-- Generated by JavaScript -->
        </table>
    </div>

    <p style="font-size: 12px; color: #6b7280;">Click any cell to see detailed analysis of that asset pair</p>

    <div class="detail-panel" id="detailPanel">
        <h2 style="margin-top: 0;">Asset Pair Analysis</h2>
        <div class="pair-info">
            <div class="pair-box">
                <strong id="asset1Name">Asset 1</strong>
                <p style="font-size: 12px; color: #6b7280;" id="asset1Desc"></p>
            </div>
            <div class="pair-box">
                <strong id="asset2Name">Asset 2</strong>
                <p style="font-size: 12px; color: #6b7280;" id="asset2Desc"></p>
            </div>
        </div>
        <div class="correlation-value" id="corrValue">0.85</div>
        <div class="interpretation" id="interpretation"></div>
    </div>

    <script>
        const assets = [
            { id: 'us_stocks', name: 'US Stocks', desc: 'S&P 500 Index' },
            { id: 'intl_stocks', name: 'Int\'l Stocks', desc: 'MSCI EAFE Index' },
            { id: 'bonds', name: 'US Bonds', desc: 'Bloomberg Aggregate' },
            { id: 'reits', name: 'REITs', desc: 'Real Estate Investment Trusts' },
            { id: 'gold', name: 'Gold', desc: 'Gold Spot Price' },
            { id: 'commodities', name: 'Commodities', desc: 'Bloomberg Commodity Index' },
            { id: 'crypto', name: 'Bitcoin', desc: 'Bitcoin USD' }
        ];

        // Correlation matrix data (approximate historical correlations)
        const correlations = {
            'us_stocks-us_stocks': 1.00,
            'us_stocks-intl_stocks': 0.85,
            'us_stocks-bonds': -0.10,
            'us_stocks-reits': 0.75,
            'us_stocks-gold': 0.05,
            'us_stocks-commodities': 0.45,
            'us_stocks-crypto': 0.30,
            'intl_stocks-intl_stocks': 1.00,
            'intl_stocks-bonds': -0.05,
            'intl_stocks-reits': 0.70,
            'intl_stocks-gold': 0.15,
            'intl_stocks-commodities': 0.50,
            'intl_stocks-crypto': 0.25,
            'bonds-bonds': 1.00,
            'bonds-reits': 0.20,
            'bonds-gold': 0.25,
            'bonds-commodities': -0.15,
            'bonds-crypto': -0.10,
            'reits-reits': 1.00,
            'reits-gold': 0.10,
            'reits-commodities': 0.35,
            'reits-crypto': 0.20,
            'gold-gold': 1.00,
            'gold-commodities': 0.40,
            'gold-crypto': 0.15,
            'commodities-commodities': 1.00,
            'commodities-crypto': 0.10,
            'crypto-crypto': 1.00
        };

        function getCorrelation(asset1, asset2) {
            const key1 = `${asset1}-${asset2}`;
            const key2 = `${asset2}-${asset1}`;
            return correlations[key1] || correlations[key2] || 0;
        }

        function getColorClass(corr) {
            if (corr >= 0.7) return 'high-positive';
            if (corr >= 0.3) return 'medium-positive';
            if (corr > 0) return 'low-positive';
            if (corr >= -0.3) return 'low-negative';
            if (corr >= -0.7) return 'medium-negative';
            return 'high-negative';
        }

        function buildMatrix() {
            const table = document.getElementById('matrix');
            let html = '<thead><tr><th></th>';
            assets.forEach(asset => {
                html += `<th>${asset.name}</th>`;
            });
            html += '</tr></thead><tbody>';

            assets.forEach(asset1 => {
                html += `<tr><th>${asset1.name}</th>`;
                assets.forEach(asset2 => {
                    const corr = getCorrelation(asset1.id, asset2.id);
                    const colorClass = getColorClass(corr);
                    html += `<td class="${colorClass}" onclick="showDetail('${asset1.id}', '${asset2.id}')">${corr.toFixed(2)}</td>`;
                });
                html += '</tr>';
            });
            html += '</tbody>';
            table.innerHTML = html;
        }

        function showDetail(id1, id2) {
            const asset1 = assets.find(a => a.id === id1);
            const asset2 = assets.find(a => a.id === id2);
            const corr = getCorrelation(id1, id2);

            document.getElementById('asset1Name').textContent = asset1.name;
            document.getElementById('asset1Desc').textContent = asset1.desc;
            document.getElementById('asset2Name').textContent = asset2.name;
            document.getElementById('asset2Desc').textContent = asset2.desc;

            const valueEl = document.getElementById('corrValue');
            valueEl.textContent = corr.toFixed(2);
            valueEl.className = 'correlation-value ' + getColorClass(corr);

            let interpretation = '';
            if (id1 === id2) {
                interpretation = 'An asset always has perfect correlation (1.00) with itself.';
            } else if (corr >= 0.7) {
                interpretation = `<strong>Strong Positive:</strong> These assets tend to move together. When ${asset1.name} rises, ${asset2.name} usually rises too. This provides limited diversification benefit.`;
            } else if (corr >= 0.3) {
                interpretation = `<strong>Moderate Positive:</strong> These assets have some tendency to move together, but not always. Some diversification benefit.`;
            } else if (corr > 0) {
                interpretation = `<strong>Weak Positive:</strong> These assets show little relationship. Good diversification potential.`;
            } else if (corr >= -0.3) {
                interpretation = `<strong>Weak Negative:</strong> These assets tend to move slightly opposite. Good for diversification.`;
            } else {
                interpretation = `<strong>Negative Correlation:</strong> When ${asset1.name} falls, ${asset2.name} tends to rise. Excellent for portfolio protection!`;
            }
            document.getElementById('interpretation').innerHTML = interpretation;

            document.getElementById('detailPanel').style.display = 'block';
        }

        // Initialize
        buildMatrix();
    </script>
</body>
</html>
