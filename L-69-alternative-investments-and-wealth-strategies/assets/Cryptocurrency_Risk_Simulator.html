<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptocurrency Risk Simulator</title>
    <style>
        :root { --primary: #6366f1; --secondary: #8b5cf6; --success: #10b981; --warning: #f59e0b; --danger: #ef4444; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; font-size: 14px; line-height: 1.5; color: #1f2937; max-width: 900px; margin: 0 auto; padding: 15px; }
        h1 { color: var(--primary); font-size: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px; }
        h2 { color: var(--secondary); font-size: 18px; margin-top: 20px; }
        .setup { background: #e0e7ff; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .input-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 13px; }
        input, select { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px; box-sizing: border-box; }
        .period-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0; }
        .period-card { background: #f9fafb; padding: 15px; border-radius: 5px; border: 2px solid #d1d5db; cursor: pointer; }
        .period-card:hover { border-color: var(--primary); }
        .period-card.selected { border-color: var(--primary); background: #e0e7ff; }
        .period-title { font-weight: bold; font-size: 14px; }
        .period-dates { font-size: 12px; color: #6b7280; }
        .period-stats { margin-top: 10px; font-size: 12px; }
        .stat-row { display: flex; justify-content: space-between; padding: 3px 0; }
        .positive { color: var(--success); font-weight: bold; }
        .negative { color: var(--danger); font-weight: bold; }
        .simulation { background: #f9fafb; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .timeline { margin: 15px 0; }
        .month-bar { display: flex; align-items: center; margin: 5px 0; font-size: 11px; }
        .month-label { width: 60px; }
        .bar-container { flex: 1; height: 20px; background: #e5e7eb; border-radius: 4px; overflow: hidden; position: relative; }
        .bar { height: 100%; transition: width 0.3s; }
        .bar.gain { background: var(--success); }
        .bar.loss { background: var(--danger); }
        .bar-value { position: absolute; right: 5px; top: 50%; transform: translateY(-50%); font-weight: bold; }
        .final-results { background: #fef3c7; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; }
        .result-box { background: white; padding: 10px; border-radius: 4px; text-align: center; }
        .result-value { font-size: 20px; font-weight: bold; }
        button { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: var(--secondary); }
        @media print { body { font-size: 11pt; } button { display: none; } }
    </style>
</head>
<body>
    <h1>Cryptocurrency Risk Simulator</h1>
    <p>Experience historical crypto volatility with different portfolio allocations</p>

    <div class="setup">
        <h2 style="margin-top: 0;">Portfolio Setup</h2>
        <div class="input-grid">
            <div class="input-group">
                <label>Total Portfolio ($)</label>
                <input type="number" id="portfolio" value="100000" step="10000">
            </div>
            <div class="input-group">
                <label>Crypto Allocation (%)</label>
                <input type="number" id="cryptoAlloc" value="5" min="0" max="100" step="5">
            </div>
            <div class="input-group">
                <label>Remaining in S&P 500</label>
                <input type="text" id="stockAlloc" value="95%" disabled style="background: #f3f4f6;">
            </div>
        </div>
    </div>

    <h2>Select Historical Period</h2>
    <div class="period-cards">
        <div class="period-card" onclick="selectPeriod('bull2017', this)">
            <div class="period-title">2017 Bull Run</div>
            <div class="period-dates">Jan - Dec 2017</div>
            <div class="period-stats">
                <div class="stat-row"><span>Bitcoin Return</span><span class="positive">+1,318%</span></div>
                <div class="stat-row"><span>Max Drawdown</span><span class="negative">-40%</span></div>
            </div>
        </div>
        <div class="period-card" onclick="selectPeriod('crash2018', this)">
            <div class="period-title">2018 Crash</div>
            <div class="period-dates">Jan - Dec 2018</div>
            <div class="period-stats">
                <div class="stat-row"><span>Bitcoin Return</span><span class="negative">-73%</span></div>
                <div class="stat-row"><span>Max Drawdown</span><span class="negative">-84%</span></div>
            </div>
        </div>
        <div class="period-card selected" onclick="selectPeriod('covid2020', this)">
            <div class="period-title">2020 COVID & Recovery</div>
            <div class="period-dates">Jan - Dec 2020</div>
            <div class="period-stats">
                <div class="stat-row"><span>Bitcoin Return</span><span class="positive">+305%</span></div>
                <div class="stat-row"><span>Max Drawdown</span><span class="negative">-50%</span></div>
            </div>
        </div>
        <div class="period-card" onclick="selectPeriod('crash2022', this)">
            <div class="period-title">2022 Crash</div>
            <div class="period-dates">Jan - Dec 2022</div>
            <div class="period-stats">
                <div class="stat-row"><span>Bitcoin Return</span><span class="negative">-65%</span></div>
                <div class="stat-row"><span>Max Drawdown</span><span class="negative">-77%</span></div>
            </div>
        </div>
    </div>

    <div style="text-align: center;">
        <button onclick="runSimulation()">Run Simulation</button>
    </div>

    <div class="simulation" id="simulation" style="display: none;">
        <h2 style="margin-top: 0;">Monthly Portfolio Performance</h2>
        <div class="timeline" id="timeline"></div>
    </div>

    <div class="final-results" id="results" style="display: none;">
        <h2 style="margin-top: 0;">Period Results</h2>
        <div class="results-grid">
            <div class="result-box">
                <div>Starting Value</div>
                <div class="result-value" id="startValue">$100,000</div>
            </div>
            <div class="result-box">
                <div>Ending Value</div>
                <div class="result-value" id="endValue">$0</div>
            </div>
            <div class="result-box">
                <div>Total Return</div>
                <div class="result-value" id="totalReturn">0%</div>
            </div>
            <div class="result-box">
                <div>Max Drawdown</div>
                <div class="result-value negative" id="maxDrawdown">0%</div>
            </div>
            <div class="result-box">
                <div>Crypto Contribution</div>
                <div class="result-value" id="cryptoContrib">$0</div>
            </div>
            <div class="result-box">
                <div>Stock Contribution</div>
                <div class="result-value" id="stockContrib">$0</div>
            </div>
        </div>
    </div>

    <script>
        const periods = {
            bull2017: {
                crypto: [0.08, 0.15, -0.10, 0.45, 0.65, 0.20, -0.05, 0.68, -0.38, 0.48, 0.54, 0.39],
                stocks: [0.02, 0.04, 0.00, 0.01, 0.01, 0.01, 0.02, 0.00, 0.02, 0.02, 0.03, 0.01]
            },
            crash2018: {
                crypto: [-0.27, 0.02, -0.33, 0.33, -0.19, -0.14, 0.20, -0.09, -0.06, -0.04, -0.37, -0.07],
                stocks: [0.06, -0.04, -0.03, 0.00, 0.02, 0.01, 0.04, 0.03, 0.00, -0.07, 0.02, -0.09]
            },
            covid2020: {
                crypto: [0.30, -0.08, -0.25, 0.35, 0.10, -0.03, 0.24, 0.03, -0.08, 0.28, 0.43, 0.47],
                stocks: [0.00, -0.08, -0.13, 0.13, 0.05, 0.02, 0.06, 0.07, -0.04, -0.03, 0.11, 0.04]
            },
            crash2022: {
                crypto: [-0.17, 0.12, 0.05, -0.17, -0.15, -0.37, 0.17, -0.14, -0.03, 0.05, -0.16, -0.04],
                stocks: [-0.05, -0.03, 0.04, -0.09, 0.00, -0.08, 0.09, -0.04, -0.09, 0.08, 0.06, -0.06]
            }
        };

        let selectedPeriod = 'covid2020';

        document.getElementById('cryptoAlloc').addEventListener('input', function() {
            const crypto = parseInt(this.value) || 0;
            document.getElementById('stockAlloc').value = (100 - crypto) + '%';
        });

        function selectPeriod(period, element) {
            selectedPeriod = period;
            document.querySelectorAll('.period-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');
        }

        function runSimulation() {
            const portfolio = parseFloat(document.getElementById('portfolio').value) || 100000;
            const cryptoPct = parseFloat(document.getElementById('cryptoAlloc').value) / 100 || 0.05;
            const stockPct = 1 - cryptoPct;

            const period = periods[selectedPeriod];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

            let cryptoValue = portfolio * cryptoPct;
            let stockValue = portfolio * stockPct;
            let peakValue = portfolio;
            let maxDrawdown = 0;

            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';

            period.crypto.forEach((cryptoRet, i) => {
                const stockRet = period.stocks[i];

                cryptoValue *= (1 + cryptoRet);
                stockValue *= (1 + stockRet);
                const totalValue = cryptoValue + stockValue;
                const monthReturn = (totalValue / (i === 0 ? portfolio : peakValue) - 1);

                peakValue = Math.max(peakValue, totalValue);
                const drawdown = (totalValue - peakValue) / peakValue;
                maxDrawdown = Math.min(maxDrawdown, drawdown);

                const returnPct = ((totalValue / portfolio - 1) * 100).toFixed(1);
                const isGain = totalValue >= portfolio;

                timeline.innerHTML += `
                    <div class="month-bar">
                        <div class="month-label">${months[i]}</div>
                        <div class="bar-container">
                            <div class="bar ${isGain ? 'gain' : 'loss'}" style="width: ${Math.min(100, Math.abs(returnPct) * 2)}%;"></div>
                            <div class="bar-value" style="color: ${isGain ? 'var(--success)' : 'var(--danger)'};">${returnPct > 0 ? '+' : ''}${returnPct}%</div>
                        </div>
                    </div>
                `;
            });

            const finalValue = cryptoValue + stockValue;
            const totalReturn = ((finalValue / portfolio - 1) * 100);
            const cryptoContrib = cryptoValue - (portfolio * cryptoPct);
            const stockContrib = stockValue - (portfolio * stockPct);

            document.getElementById('startValue').textContent = '$' + portfolio.toLocaleString();
            document.getElementById('endValue').textContent = '$' + Math.round(finalValue).toLocaleString();
            document.getElementById('totalReturn').textContent = (totalReturn > 0 ? '+' : '') + totalReturn.toFixed(1) + '%';
            document.getElementById('totalReturn').className = 'result-value ' + (totalReturn > 0 ? 'positive' : 'negative');
            document.getElementById('maxDrawdown').textContent = (maxDrawdown * 100).toFixed(1) + '%';
            document.getElementById('cryptoContrib').textContent = (cryptoContrib > 0 ? '+' : '') + '$' + Math.round(cryptoContrib).toLocaleString();
            document.getElementById('cryptoContrib').className = 'result-value ' + (cryptoContrib > 0 ? 'positive' : 'negative');
            document.getElementById('stockContrib').textContent = (stockContrib > 0 ? '+' : '') + '$' + Math.round(stockContrib).toLocaleString();
            document.getElementById('stockContrib').className = 'result-value ' + (stockContrib > 0 ? 'positive' : 'negative');

            document.getElementById('simulation').style.display = 'block';
            document.getElementById('results').style.display = 'block';
        }

        // Initialize
        runSimulation();
    </script>
</body>
</html>
