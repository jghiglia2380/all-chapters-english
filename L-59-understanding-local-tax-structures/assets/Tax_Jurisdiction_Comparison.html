<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Jurisdiction Comparison Matrix</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        header { text-align: center; margin-bottom: 30px; }
        h1 { font-size: 2rem; color: #6366f1; margin-bottom: 10px; }
        .subtitle { color: #6b7280; }
        .location-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .location-tab {
            padding: 10px 20px;
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        .location-tab.active {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }
        .location-section {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .section-title { font-size: 1rem; font-weight: bold; margin-bottom: 15px; color: #6366f1; }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .form-group { margin-bottom: 10px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 4px; font-size: 0.85rem; }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .compare-btn {
            width: 100%;
            padding: 15px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }
        .compare-btn:hover { background: #4f46e5; }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
        }
        .comparison-table th {
            background: #6366f1;
            color: white;
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
        }
        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 0.9rem;
        }
        .comparison-table tr:nth-child(even) { background: #f9fafb; }
        .best { background: #d1fae5 !important; color: #065f46; font-weight: bold; }
        .worst { background: #fee2e2 !important; color: #991b1b; }
        .winner-box {
            background: #d1fae5;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #10b981;
            margin-top: 20px;
            text-align: center;
        }
        .winner-box h3 { color: #065f46; margin-bottom: 10px; }
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
            color: #6b7280;
            font-size: 0.9rem;
        }
        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .comparison-table { font-size: 0.8rem; }
        }
        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; }
            .compare-btn, .location-tabs { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Tax Jurisdiction Comparison</h1>
            <p class="subtitle">Compare tax burdens across different locations</p>
        </header>

        <div class="location-tabs">
            <button class="location-tab active" onclick="showLocation(0)">Location A</button>
            <button class="location-tab" onclick="showLocation(1)">Location B</button>
            <button class="location-tab" onclick="showLocation(2)">Location C</button>
        </div>

        <div id="locationForms">
            <div class="location-section" id="location0">
                <div class="section-title">Location A Details</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Location Name</label>
                        <input type="text" id="name0" value="City Center">
                    </div>
                    <div class="form-group">
                        <label>Monthly Rent/Mortgage ($)</label>
                        <input type="number" id="housing0" value="1800">
                    </div>
                    <div class="form-group">
                        <label>Sales Tax Rate (%)</label>
                        <input type="number" id="sales0" value="8.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Local Income Tax Rate (%)</label>
                        <input type="number" id="income0" value="1.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Property Tax Rate (mills)</label>
                        <input type="number" id="property0" value="65" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Services Rating (1-10)</label>
                        <input type="number" id="services0" value="8" min="1" max="10">
                    </div>
                </div>
            </div>

            <div class="location-section" id="location1" style="display: none;">
                <div class="section-title">Location B Details</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Location Name</label>
                        <input type="text" id="name1" value="Suburb">
                    </div>
                    <div class="form-group">
                        <label>Monthly Rent/Mortgage ($)</label>
                        <input type="number" id="housing1" value="1500">
                    </div>
                    <div class="form-group">
                        <label>Sales Tax Rate (%)</label>
                        <input type="number" id="sales1" value="7.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Local Income Tax Rate (%)</label>
                        <input type="number" id="income1" value="1.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Property Tax Rate (mills)</label>
                        <input type="number" id="property1" value="75" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Services Rating (1-10)</label>
                        <input type="number" id="services1" value="7" min="1" max="10">
                    </div>
                </div>
            </div>

            <div class="location-section" id="location2" style="display: none;">
                <div class="section-title">Location C Details</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Location Name</label>
                        <input type="text" id="name2" value="Rural Area">
                    </div>
                    <div class="form-group">
                        <label>Monthly Rent/Mortgage ($)</label>
                        <input type="number" id="housing2" value="1200">
                    </div>
                    <div class="form-group">
                        <label>Sales Tax Rate (%)</label>
                        <input type="number" id="sales2" value="6.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Local Income Tax Rate (%)</label>
                        <input type="number" id="income2" value="0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Property Tax Rate (mills)</label>
                        <input type="number" id="property2" value="45" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Services Rating (1-10)</label>
                        <input type="number" id="services2" value="5" min="1" max="10">
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group" style="margin-top: 15px;">
            <label>Your Annual Gross Income ($)</label>
            <input type="number" id="annualIncome" value="60000" style="max-width: 300px;">
        </div>

        <button class="compare-btn" onclick="compareLocations()">Compare All Locations</button>

        <table class="comparison-table" id="resultsTable" style="display: none;">
            <thead>
                <tr>
                    <th>Factor</th>
                    <th id="col0">Location A</th>
                    <th id="col1">Location B</th>
                    <th id="col2">Location C</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Annual Housing</strong></td>
                    <td id="housing_r0">$0</td>
                    <td id="housing_r1">$0</td>
                    <td id="housing_r2">$0</td>
                </tr>
                <tr>
                    <td><strong>Income Tax</strong></td>
                    <td id="income_r0">$0</td>
                    <td id="income_r1">$0</td>
                    <td id="income_r2">$0</td>
                </tr>
                <tr>
                    <td><strong>Est. Sales Tax</strong></td>
                    <td id="sales_r0">$0</td>
                    <td id="sales_r1">$0</td>
                    <td id="sales_r2">$0</td>
                </tr>
                <tr>
                    <td><strong>Services Rating</strong></td>
                    <td id="services_r0">0/10</td>
                    <td id="services_r1">0/10</td>
                    <td id="services_r2">0/10</td>
                </tr>
                <tr style="background: #f0f9ff;">
                    <td><strong>Total Annual Cost</strong></td>
                    <td id="total_r0"><strong>$0</strong></td>
                    <td id="total_r1"><strong>$0</strong></td>
                    <td id="total_r2"><strong>$0</strong></td>
                </tr>
            </tbody>
        </table>

        <div class="winner-box" id="winner" style="display: none;">
            <h3 id="winnerName">Best Value Location</h3>
            <p id="winnerDetails"></p>
        </div>

        <footer>
            <p><strong>PFL Academy</strong> | Understanding Local Tax Structures</p>
        </footer>
    </div>

    <script>
        let activeLocation = 0;

        function showLocation(index) {
            document.querySelectorAll('.location-section').forEach((s, i) => {
                s.style.display = i === index ? 'block' : 'none';
            });
            document.querySelectorAll('.location-tab').forEach((t, i) => {
                t.classList.toggle('active', i === index);
            });
            activeLocation = index;
        }

        function compareLocations() {
            const income = parseFloat(document.getElementById('annualIncome').value) || 0;
            const taxableSpending = income * 0.3; // Assume 30% spent on taxable goods

            const results = [];

            for (let i = 0; i < 3; i++) {
                const name = document.getElementById(`name${i}`).value;
                const housing = parseFloat(document.getElementById(`housing${i}`).value) || 0;
                const salesRate = parseFloat(document.getElementById(`sales${i}`).value) || 0;
                const incomeRate = parseFloat(document.getElementById(`income${i}`).value) || 0;
                const services = parseInt(document.getElementById(`services${i}`).value) || 0;

                const annualHousing = housing * 12;
                const incomeTax = income * (incomeRate / 100);
                const salesTax = taxableSpending * (salesRate / 100);
                const totalCost = annualHousing + incomeTax + salesTax;

                results.push({
                    index: i,
                    name,
                    annualHousing,
                    incomeTax,
                    salesTax,
                    services,
                    totalCost
                });

                // Update column header
                document.getElementById(`col${i}`).textContent = name;

                // Update values
                document.getElementById(`housing_r${i}`).textContent = '$' + annualHousing.toLocaleString();
                document.getElementById(`income_r${i}`).textContent = '$' + incomeTax.toFixed(0);
                document.getElementById(`sales_r${i}`).textContent = '$' + salesTax.toFixed(0);
                document.getElementById(`services_r${i}`).textContent = services + '/10';
                document.getElementById(`total_r${i}`).innerHTML = '<strong>$' + totalCost.toFixed(0) + '</strong>';
            }

            // Find best and worst
            results.sort((a, b) => a.totalCost - b.totalCost);
            const best = results[0];
            const worst = results[2];

            // Highlight best/worst totals
            for (let i = 0; i < 3; i++) {
                const cell = document.getElementById(`total_r${i}`);
                cell.classList.remove('best', 'worst');
                if (i === best.index) cell.classList.add('best');
                if (i === worst.index) cell.classList.add('worst');
            }

            // Show winner
            const savings = worst.totalCost - best.totalCost;
            document.getElementById('winnerName').textContent = `Best Value: ${best.name}`;
            document.getElementById('winnerDetails').textContent =
                `Save $${savings.toFixed(0)} annually compared to ${worst.name}. ` +
                `Services rating: ${best.services}/10`;

            document.getElementById('resultsTable').style.display = 'table';
            document.getElementById('winner').style.display = 'block';
        }
    </script>
</body>
</html>
