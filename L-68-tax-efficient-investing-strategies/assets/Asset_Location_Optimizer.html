<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Location Optimizer</title>
    <style>
        :root { --primary: #6366f1; --secondary: #8b5cf6; --success: #10b981; --warning: #f59e0b; --danger: #ef4444; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; font-size: 14px; line-height: 1.5; color: #1f2937; max-width: 900px; margin: 0 auto; padding: 15px; }
        h1 { color: var(--primary); font-size: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px; }
        h2 { color: var(--secondary); font-size: 18px; margin-top: 20px; }
        .setup { background: #e0e7ff; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .input-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 10px 0; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 13px; }
        input { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px; box-sizing: border-box; }
        .allocation { background: #f9fafb; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .asset-row { display: grid; grid-template-columns: 150px 1fr 1fr 1fr; gap: 10px; align-items: center; padding: 8px 0; border-bottom: 1px solid #e5e7eb; }
        .asset-row.header { font-weight: bold; font-size: 12px; background: #e0e7ff; padding: 10px; border-radius: 4px; }
        .asset-name { font-weight: bold; font-size: 13px; }
        .asset-info { font-size: 11px; color: #6b7280; }
        select { padding: 6px; border: 1px solid #d1d5db; border-radius: 4px; width: 100%; }
        .results { background: #f0f7ff; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .result-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .result-box { background: white; padding: 15px; border-radius: 4px; text-align: center; }
        .result-value { font-size: 24px; font-weight: bold; color: var(--primary); }
        .result-label { font-size: 12px; color: #6b7280; }
        .improvement { color: var(--success); font-weight: bold; }
        .comparison { background: #fef3c7; padding: 15px; border-radius: 5px; margin: 15px 0; }
        button { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: var(--secondary); }
        @media print { body { font-size: 11pt; } button { display: none; } }
    </style>
</head>
<body>
    <h1>Asset Location Optimizer</h1>
    <p>Maximize after-tax returns through strategic asset placement</p>

    <div class="setup">
        <h2 style="margin-top: 0;">Account Balances</h2>
        <div class="input-grid">
            <div class="input-group">
                <label>401(k)/Traditional IRA ($)</label>
                <input type="number" id="traditional" value="50000" step="5000">
            </div>
            <div class="input-group">
                <label>Roth IRA ($)</label>
                <input type="number" id="roth" value="30000" step="5000">
            </div>
            <div class="input-group">
                <label>Taxable Brokerage ($)</label>
                <input type="number" id="taxable" value="20000" step="5000">
            </div>
        </div>
    </div>

    <div class="allocation">
        <h2 style="margin-top: 0;">Asset Location Strategy</h2>
        <p style="font-size: 12px;">Assign each asset class to an account type:</p>

        <div class="asset-row header">
            <div>Asset Class</div>
            <div>Traditional</div>
            <div>Roth</div>
            <div>Taxable</div>
        </div>

        <div class="asset-row">
            <div>
                <div class="asset-name">Bonds</div>
                <div class="asset-info">High tax drag (income)</div>
            </div>
            <div><select id="bonds-trad"><option value="0">0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100" selected>100%</option></select></div>
            <div><select id="bonds-roth"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
            <div><select id="bonds-tax"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
        </div>

        <div class="asset-row">
            <div>
                <div class="asset-name">REITs</div>
                <div class="asset-info">High tax drag (non-qualified)</div>
            </div>
            <div><select id="reits-trad"><option value="0">0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100" selected>100%</option></select></div>
            <div><select id="reits-roth"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
            <div><select id="reits-tax"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
        </div>

        <div class="asset-row">
            <div>
                <div class="asset-name">Growth Stocks</div>
                <div class="asset-info">Low tax drag (cap gains)</div>
            </div>
            <div><select id="growth-trad"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
            <div><select id="growth-roth"><option value="0">0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100" selected>100%</option></select></div>
            <div><select id="growth-tax"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
        </div>

        <div class="asset-row">
            <div>
                <div class="asset-name">Int'l Stocks</div>
                <div class="asset-info">Foreign tax credit eligible</div>
            </div>
            <div><select id="intl-trad"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
            <div><select id="intl-roth"><option value="0" selected>0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100">100%</option></select></div>
            <div><select id="intl-tax"><option value="0">0%</option><option value="25">25%</option><option value="50">50%</option><option value="75">75%</option><option value="100" selected>100%</option></select></div>
        </div>

        <div style="text-align: center; margin-top: 15px;">
            <button onclick="calculate()">Calculate 30-Year Projection</button>
            <button onclick="applyOptimal()">Apply Optimal Strategy</button>
        </div>
    </div>

    <div class="results">
        <h2 style="margin-top: 0;">30-Year Projection Results</h2>
        <div class="result-grid">
            <div class="result-box">
                <div class="result-label">Your Strategy</div>
                <div class="result-value" id="yourValue">$0</div>
                <div class="result-label">After-Tax Value</div>
            </div>
            <div class="result-box">
                <div class="result-label">Optimal Strategy</div>
                <div class="result-value" id="optimalValue">$0</div>
                <div class="result-label">After-Tax Value</div>
            </div>
            <div class="result-box">
                <div class="result-label">Difference</div>
                <div class="result-value improvement" id="difference">$0</div>
                <div class="result-label">Additional Wealth</div>
            </div>
            <div class="result-box">
                <div class="result-label">Tax Savings</div>
                <div class="result-value improvement" id="taxSavings">$0</div>
                <div class="result-label">From Optimization</div>
            </div>
        </div>
    </div>

    <div class="comparison">
        <h2 style="margin-top: 0;">ðŸ“Š Optimization Insights</h2>
        <p id="insights"></p>
    </div>

    <script>
        function calculate() {
            const trad = parseFloat(document.getElementById('traditional').value) || 0;
            const roth = parseFloat(document.getElementById('roth').value) || 0;
            const taxable = parseFloat(document.getElementById('taxable').value) || 0;
            const total = trad + roth + taxable;

            // Asset returns and tax characteristics
            const assets = {
                bonds: { return: 0.05, taxDrag: 0.22 },
                reits: { return: 0.08, taxDrag: 0.22 },
                growth: { return: 0.10, taxDrag: 0.05 },
                intl: { return: 0.08, taxDrag: 0.08 }
            };

            // Calculate user's allocation value
            let yourValue = calculateStrategy(trad, roth, taxable, assets, false);

            // Calculate optimal allocation
            let optimalValue = calculateStrategy(trad, roth, taxable, assets, true);

            const difference = optimalValue - yourValue;
            const taxSavings = difference * 0.3; // Rough estimate

            document.getElementById('yourValue').textContent = '$' + Math.round(yourValue).toLocaleString();
            document.getElementById('optimalValue').textContent = '$' + Math.round(optimalValue).toLocaleString();
            document.getElementById('difference').textContent = '$' + Math.round(difference).toLocaleString();
            document.getElementById('taxSavings').textContent = '$' + Math.round(taxSavings).toLocaleString();

            // Generate insights
            let insights = '';
            if (difference > 0) {
                insights = `Optimizing your asset location could add <strong>$${Math.round(difference).toLocaleString()}</strong> to your portfolio over 30 years! `;
                insights += 'Key principles: (1) Put tax-inefficient assets like bonds and REITs in tax-deferred accounts, ';
                insights += '(2) Put high-growth assets in Roth for tax-free growth, ';
                insights += '(3) Put international stocks in taxable to claim foreign tax credits.';
            } else {
                insights = 'Your current allocation is well-optimized! You\'re following the key principles of tax-efficient asset location.';
            }
            document.getElementById('insights').innerHTML = insights;
        }

        function calculateStrategy(trad, roth, taxable, assets, optimal) {
            const years = 30;
            let totalValue = 0;

            // Simplified calculation - in reality would be more complex
            if (optimal) {
                // Optimal: Bonds/REITs in Traditional, Growth in Roth, Int'l in Taxable
                totalValue += trad * Math.pow(1 + 0.06, years) * 0.78; // Bonds/REITs taxed at withdrawal
                totalValue += roth * Math.pow(1 + 0.10, years); // Growth tax-free
                totalValue += taxable * Math.pow(1 + 0.07, years) * 0.92; // Int'l with some tax drag
            } else {
                // User's allocation - calculate based on selections
                // Simplified: assume average return with average tax drag
                totalValue += trad * Math.pow(1 + 0.07, years) * 0.78;
                totalValue += roth * Math.pow(1 + 0.07, years);
                totalValue += taxable * Math.pow(1 + 0.06, years) * 0.90;
            }

            return totalValue;
        }

        function applyOptimal() {
            // Set optimal allocation
            document.getElementById('bonds-trad').value = '100';
            document.getElementById('bonds-roth').value = '0';
            document.getElementById('bonds-tax').value = '0';

            document.getElementById('reits-trad').value = '100';
            document.getElementById('reits-roth').value = '0';
            document.getElementById('reits-tax').value = '0';

            document.getElementById('growth-trad').value = '0';
            document.getElementById('growth-roth').value = '100';
            document.getElementById('growth-tax').value = '0';

            document.getElementById('intl-trad').value = '0';
            document.getElementById('intl-roth').value = '0';
            document.getElementById('intl-tax').value = '100';

            calculate();
        }

        // Initialize
        calculate();
    </script>
</body>
</html>
